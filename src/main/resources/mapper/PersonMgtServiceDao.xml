<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.im.server.dao.PersonMgtServiceDao">

    <resultMap id="AsstLoginMapper" type="com.im.server.mode.LoginResponse">
        <result column="pid" property="pid"/>
        <result column="faculty_id" property="uniqueId"/>
        <result column="name" property="name"/>
        <result column="univ_name" property="univName"/>
        <result column="college_name" property="collegeName"/>
        <result column="img_url" property="imgUrl"/>
    </resultMap>

    <resultMap id="StdLoginMapper" type="com.im.server.mode.LoginResponse">
        <result column="pid" property="pid"/>
        <result column="student_id" property="uniqueId"/>
        <result column="name" property="name"/>
        <result column="univ_name" property="univName"/>
        <result column="college_name" property="collegeName"/>
        <result column="grade" property="gradeName"/>
        <result column="major" property="majorName"/>
        <result column="class_name" property="className"/>
        <result column="img_url" property="imgUrl"/>
    </resultMap>

    <select id="queryStudentPid" parameterType="java.util.Map" resultType="Long">
        select pid from tb_student where phone = #{phone} or phone_bak =#{phone}
    </select>

    <select id="queryAssistantPid" parameterType="java.lang.String" resultType="Long">
        select pid from tb_assistant where phone = #{phone} or phone_bak = #{phone}
    </select>

    <select id="queryAssInfo" parameterType="java.lang.Long" resultMap="AsstLoginMapper">
        select pid, faculty_id,name, univ_name, college_name, img_url from tb_assistant where
         pid = #{pid}
    </select>

    <select id="queryStuInfo" parameterType="java.lang.Long" resultMap="StdLoginMapper">
        select pid,student_id,name, univ_name, college_name,grade, major, class_name, img_url from tb_student where pid = #{pid}
    </select>

</mapper>